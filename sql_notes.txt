
--------------------------------------------------------------------------------

SQL Commands : 

DDL : Create, Alter, Drop, Rename, Truncate //altering schema or tables
DML : Insert, Update, Delete, Select		//data manipulation
DCL : Grant, Revoke							//granting permissions of tables to users
TCL : Commit, Rollback, Savepoint			//dealing with states of transactions
Constraints : Primary key, Foreign key, check, Not Null, Unique, Default

--------------------------------------------------------------------------

#Desc : Viewing structure of table

----------------------------------------------------------------------------

#Create : It is used to create DBMS objects like tables, database, views, triggers, procedures, functions etc. It is mostly used for creating tables.

Syntax - 
create table table_name(datatype fieldname1(limit), datatype fieldname2(limit));

Example - 
create table student("id" number(10), "name" varchar2(15), "branch" varchar2(15));

-----------------------------------------------------------------------------------

There are 3 techniques to fetch queries :- Nested Subquery | Corelated Subquery | Joins 

1. Nested Subquery : It follows bottom up approach | Best method

//Details of all employee who work in any dept
# Select * from Emp where e_id in (Select e_id from Dept);

2. Corelated Subquery : It follows Top down approach | m*n operations | costlier than other

//Details of all employee who work in any dept
# Select * from Emp where exists(Select e_id from Dept where Emp.e_id = Dept.e_id);

3. Joins : Cross Product + Conditions | Best method | Consumes Space

//Details of all employee who work in any dept
# Select * from Emp, Dept where Emp.e_id = Dept.e_id;

-----------------------------------------------------------------------------------------

Types of Joins : NATURAL JOIN | CROSS JOIN | SELF JOIN | INNER JOIN | LEFT JOIN | RIGHT JOIN | FULL OUTER JOIN

1. NATURAL JOIN : Natural Join joins two tables based on same attribute name and datatypes. The resulting table will contain all the attributes of both the table but keep only one copy of each common column.
# SELECT * FROM Student NATURAL JOIN Marks;

2. CROSS JOIN : It is cartesian product of two tables
# SELECT * FROM Student CROSS JOIN Marks;

3. SELF JOIN : A table joining with itself
#SELECT * FROM Student a, Student b WHERE some_condition;

4. INNER JOIN :  Returns rows that have matching values in both tables.

5. LEFT JOIN : Returns all rows from the left table, and the matching rows from the right table. The result is NULL from the right side, if there is no match.

6. RIGHT JOIN : Returns all rows from the right table, and the matching records from the left table. The result is NULL from the left side, when there is no match.

7. FULL OUTER JOIN :  Returns all the rows from the left table (Customers), and all the rows from the right table (Orders). If there are rows in "Customers" that do not have matches in "Orders", or if there are rows in "Orders" that do not have matches in "Customers", those rows will be listed as well.

----------------------------------------------------------------------------------------------

GROUP BY : The GROUP BY statement groups rows that have the same values into summary rows, like "find the number of customers in each country"

HAVING : The HAVING clause was added to SQL because the WHERE keyword could not be used with aggregate functions.

------------------------------------------------------------------------------------------------

LIMIT : limits the number of records to be viewed.
#Select * from Emp LIMIT 50 //shows only first 50 records

UNION : combining columns together having same data type. Duplicate values in both the col will be used once
if city from sample1 and city from sample2 have same cities, they will be put once only.

# Select city, country from sample1 
UNION
Select city, country from sample2

UNION ALL : combines columns together having same data types but duplicates are also involved
if city from sample1 and city from sample2 have same cities, they will be put all together.

# Select city, country from sample1 
UNION ALL
Select city, country from sample2


----------------------------------------------------------------------------------------

Pattern Searching : 

M$ - Word starting with M
$M - Word ending with M
$M$ - Word having M anywhere in it
____ - Word contains exactly 4 characters(Given 4 underscores)
_L$  - Word containing L on 2nd place

Note : Ordering of fetched rows using Select is never guaranted, unless you explicitly use ORDER BY.
Note : select * from Emp where rownum <= n //this displays all starting n rows in Oracle

Problems : 

1. 2nd highest salary of an Employee
# Select max(sal) from Emp where sal != (select max(sal) from Emp);

2. Dept. wise highest salaries
# Select dept, max(sal) from Emp group by dept;

3. Display alternate records in SQL    
//it is for odd records, do '=' for even recored, Simple!
# Select * from (Select rownum rn, e_id, e_name, sal from Emp) where mod(rn, 2) != 0;  

4. Display duplicate of a column
# Select dept, count(dept) from Emp group by dept having count(dept) > 1;

5. Display nth row in SQL
# Select * from (Select rownum rn, Emp.* from Emp) where rn IN (2, 5, 7); //best approach

# Select * from Emp where rownum <= n MINUS Select * from Emp where rownum <= n - 1; //alternative approach















































2. Nth highest salary in Emp table //below sol using corelated subquery
#Select * from Emp e1 where (N - 1) = (Select count(distinct sal) from Emp e2 where e1.sal < e2.sal);